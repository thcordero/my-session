(this["webpackJsonpmy-sessions"]=this["webpackJsonpmy-sessions"]||[]).push([[0],{64:function(e,t,n){"use strict";n.r(t);var s=n(1),r=n(30),a=n.n(r),c=n(18),i=n(2),o=n(3),u=n(9),l=n.n(u),j=n(13),d=n(31),b=n.n(d).a.create({baseURL:"https://your-check-list.herokuapp.com",withCredentials:!0}),h=n(0),g=Object(s.createContext)(),O=function(){return Object(s.useContext)(g)},p={isLogged:!1,userData:null,errRegister:"",errLogin:"",register:function(e,t,n,s){var r=this;return Object(j.a)(l.a.mark((function a(){return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,b.post("/api/register",{username:e,password:t,name:n,lastName:s}).then((function(e){console.log(e.data),r.errRegister=e.data.message,r.isLogged=e.data.isAuth,r.userData=e.data.user}));case 2:return a.abrupt("return",Promise.resolve({user:r.userData,isAuth:r.isLogged,error:r.errRegister}));case 3:case"end":return a.stop()}}),a)})))()},login:function(e,t){var n=this;return Object(j.a)(l.a.mark((function s(){return l.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,b.post("/api/login",{username:e,password:t}).then((function(e){console.log(e.data),n.errLogin=e.data.message,n.isLogged=e.data.isAuth,n.userData=e.data.user}));case 2:return s.abrupt("return",Promise.resolve({user:n.userData,isAuth:n.isLogged,error:n.errLogin}));case 3:case"end":return s.stop()}}),s)})))()},logout:function(){var e=this;return Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.get("/api/logout").then((function(t){console.log(t.data),e.isLogged=t.data.isAuth,e.userData=t.data.user}));case 2:return t.abrupt("return",Promise.resolve({user:e.userData,isAuth:e.isLogged}));case 3:case"end":return t.stop()}}),t)})))()},isAuth:function(){var e=this;return Object(j.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.get("/api/secrets").then((function(t){console.log(t.data),e.isLogged=t.data.isAuth,e.userData=t.data.user}));case 2:return t.abrupt("return",Promise.resolve({user:e.userData,isAuth:e.isLogged}));case 3:case"end":return t.stop()}}),t)})))()}},f=function(e){var t=e.children,n=m();return Object(h.jsx)(g.Provider,{value:n,children:t})},m=function(){var e=Object(s.useState)(null),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),c=Object(o.a)(a,2),i=c[0],u=c[1],l=Object(s.useState)(""),j=Object(o.a)(l,2),d=j[0],b=j[1],h=Object(s.useState)(""),g=Object(o.a)(h,2),O=g[0],f=g[1];return{user:n,isLogged:i,loginError:d,registerError:O,setLoginError:b,setRegisterError:f,signup:function(e,t,n,s,a){p.register(e,t,n,s).then((function(e){console.log(e),f(e.error),r(e.user),u(e.isAuth),a()}))},signin:function(e,t,n){p.login(e,t).then((function(e){console.log(e),b(e.error),r(e.user),u(e.isAuth),n()}))},signout:function(e){p.logout().then((function(t){r(t),u(t.isAuth),e()}))},isAuthenticated:function(e){p.isAuth().then((function(t){r(t.user),u(t.isAuth),e()}))}}},x=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(""),c=Object(o.a)(a,2),u=c[0],l=c[1],j=Object(s.useState)(""),d=Object(o.a)(j,2),b=d[0],g=d[1],p=Object(s.useState)(""),f=Object(o.a)(p,2),m=f[0],x=f[1],v=O(),C=function(e){v.signup(n,u,b,m,(function(){l(""),r(""),g(""),x("")})),e.preventDefault()};return Object(h.jsxs)("div",{className:"register-box",children:[v.isLogged?Object(h.jsx)(i.a,{to:{pathname:"/secrets/"+v.user._id}}):Object(h.jsxs)("form",{className:"register-data",onSubmit:C,children:[Object(h.jsx)("input",{onChange:function(e){var t=e.target.value;g(t)},type:"text",value:b,name:"name",placeholder:"name",autoComplete:"off"}),Object(h.jsx)("input",{onChange:function(e){var t=e.target.value;x(t)},type:"text",value:m,name:"last name",placeholder:"last name",autoComplete:"off"}),Object(h.jsx)("input",{onChange:function(e){var t=e.target.value;r(t)},type:"email",value:n,name:"email",placeholder:"email",autoComplete:"off"}),Object(h.jsx)("input",{onChange:function(e){var t=e.target.value;l(t)},onKeyPress:function(e){"Enter"===e.key&&(C(),console.log("Enter pressed"))},type:"password",value:u,name:"password",placeholder:"password",autoComplete:"off"}),Object(h.jsx)("input",{className:"register-button",type:"submit",value:"Create Account"})]}),Object(h.jsx)("p",{className:"error-register-credentials",style:{visibility:v.registerError?"visible":"hidden"},children:v.registerError})]})},v=function(){var e=Object(s.useState)(!0),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(!1),c=Object(o.a)(a,2),u=c[0],l=c[1],j=O();Object(s.useEffect)((function(){j.isAuthenticated((function(){r(!1)}))}),[]);return Object(h.jsxs)("div",{children:[n?Object(h.jsx)("h3",{children:"loading..."}):j.isLogged?Object(h.jsx)(i.a,{to:{pathname:"/secrets/"+j.user._id}}):Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"user-title",children:[Object(h.jsx)("h3",{children:"Your Check List"}),Object(h.jsx)("button",{onClick:function(){l(!0),j.setRegisterError("")},children:" Login "})]}),u?Object(h.jsx)(i.a,{to:{pathname:"/login"}}):Object(h.jsx)(x,{})]}),Object(h.jsx)("div",{className:"footer",children:"Crafted by El Busky"})]})},C=n(33),k=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)([]),c=Object(o.a)(a,2),u=c[0],l=c[1],j=Object(s.useState)(!0),d=Object(o.a)(j,2),g=d[0],O=d[1],p=Object(i.g)().id;Object(s.useEffect)((function(){b.get("/api/list/"+p).then((function(e){l(e.data),console.log(e.data),O(!1)}))}),[]);return Object(h.jsxs)("div",{className:"to-do-list",children:[Object(h.jsxs)("form",{className:"add-item",onSubmit:function(e){b.post("/api/list/"+p,{item:n}).then((function(e){console.log(e.data),l((function(t){return[].concat(Object(C.a)(t),[e.data])}))})),r(""),e.preventDefault()},children:[Object(h.jsx)("input",{onChange:function(e){var t=e.target.value;r(t)},value:n,name:"NewItem",placeholder:"Add an item...",autoComplete:"off"}),Object(h.jsx)("input",{type:"submit",value:"Add"})]}),Object(h.jsx)("hr",{}),g?Object(h.jsx)("p",{children:"loading list..."}):Object(h.jsx)("div",{className:"to-do-list-items",children:u.map((function(e,t){return Object(h.jsxs)("div",{className:"item",children:[Object(h.jsxs)("div",{className:"item-checkbox",children:[Object(h.jsx)("input",{name:"item"+e._id,type:"checkbox",checked:e.isChecked,onChange:function(){return t=e._id,void l((function(e){return e.filter((function(e){return e._id===t?(b.patch("/api/list/"+p,{checkedItemId:t,checkedValue:!e.isChecked}).then((function(e){console.log(e.data)})),e.isChecked=!e.isChecked,e):e}))}));var t}}),Object(h.jsx)("div",{className:"item-text",children:Object(h.jsx)("span",{style:{textDecoration:e.isChecked?"line-Through":"none"},children:"  "+e.item})})]}),Object(h.jsx)("button",{onClick:function(){return t=e._id,l((function(e){return e.filter((function(e){return e._id!==t}))})),void b.delete("/api/list/"+p,{data:{itemId:t}}).then((function(e){console.log(e.data)}));var t},children:"x"})]},e._id)}))})]})},y=function(){var e=O(),t=Object(s.useState)(),n=Object(o.a)(t,2)[1];Object(s.useCallback)((function(){return n({})}),[]);return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"user-title",children:[Object(h.jsx)("h3",{children:"Your Check List"}),Object(h.jsx)("button",{onClick:function(){e.signout((function(){console.log(e.user)}))},children:" Logout "})]}),Object(h.jsx)("div",{className:"header-user",children:Object(h.jsxs)("p",{children:["Welcome ",e.user.username," "]})}),e.isLogged?Object(h.jsx)(k,{}):Object(h.jsx)(i.a,{to:{pathname:"/"}})]})},L=n(15),N=n(34),w=function(e){var t=e.component,n=Object(N.a)(e,["component"]),s=O();return console.log(s),Object(h.jsx)(i.b,Object(L.a)(Object(L.a)({},n),{},{children:s.isLogged?Object(h.jsx)(t,Object(L.a)({},n)):Object(h.jsx)(i.a,{to:{pathname:"/"}})}))},A=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(s.useState)(""),c=Object(o.a)(a,2),u=c[0],l=c[1],j=Object(s.useState)(!1),d=Object(o.a)(j,2),b=d[0],g=d[1],p=O();return Object(h.jsxs)("div",{children:[Object(h.jsxs)("div",{className:"user-title",children:[Object(h.jsx)("h3",{children:"Your Check List"}),Object(h.jsx)("button",{onClick:function(){g(!0),p.setLoginError("")},children:" Create Account "})]}),b?Object(h.jsx)(i.a,{to:{pathname:"/"}}):Object(h.jsxs)("div",{className:"login-box",children:[p.isLogged?Object(h.jsx)(i.a,{to:{pathname:"/secrets/"+p.user._id}}):Object(h.jsxs)("form",{className:"login-credentials",onSubmit:function(e){p.signin(n,u,(function(){l(""),r("")})),e.preventDefault()},children:[Object(h.jsx)("input",{onChange:function(e){var t=e.target.value;r(t)},type:"email",value:n,name:"email",placeholder:"email",autoComplete:"off"}),Object(h.jsx)("input",{onChange:function(e){var t=e.target.value;l(t)},onKeyPress:function(e){"Enter"===e.key&&(p.signin(n,u,(function(){l(""),r("")})),console.log("Enter pressed"))},type:"password",value:u,name:"password",placeholder:"password",autoComplete:"off"}),Object(h.jsx)("input",{className:"login-button",type:"submit",value:"Login"})]}),Object(h.jsx)("p",{className:"error-login-credentials",style:{visibility:p.loginError?"visible":"hidden"},children:p.loginError})]}),Object(h.jsx)("div",{className:"footer",children:"Crafted by El Busky"})]})},S=function(){return Object(h.jsx)(f,{children:Object(h.jsx)(c.a,{children:Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{exact:!0,path:"/",component:v}),Object(h.jsx)(i.b,{exact:!0,path:"/secrets",component:v}),Object(h.jsx)(i.b,{path:"/login",component:A}),Object(h.jsx)(w,{path:"/secrets/:id",component:y})]})})})};a.a.render(Object(h.jsx)(S,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.14414ed9.chunk.js.map